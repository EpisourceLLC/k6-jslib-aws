(()=>{var r={41:(t,e)=>{var r;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r=function(){return function n(o,i,c){function u(e,t){if(!i[e]){if(!o[e]){if(a)return a(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r=i[e]={exports:{}},o[e][0].call(r.exports,function(t){return u(o[e][1][t]||t)},r,r.exports,n,o,i,c)}return i[e].exports}for(var a=void 0,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,r){var n=t("./v1"),o=t("./v4"),t=o;t.v1=n,t.v4=o,e.exports=t},{"./v1":4,"./v4":5}],2:[function(t,e,r){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);e.exports=function(t,e){var r=e||0;return[(e=n)[t[r++]],e[t[r++]],e[t[r++]],e[t[r++]],"-",e[t[r++]],e[t[r++]],"-",e[t[r++]],e[t[r++]],"-",e[t[r++]],e[t[r++]],"-",e[t[r++]],e[t[r++]],e[t[r++]],e[t[r++]],e[t[r++]],e[t[+r]]].join("")}},{}],3:[function(t,e,r){var n,o,i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);i?(n=new Uint8Array(16),e.exports=function(){return i(n),n}):(o=new Array(16),e.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o})},{}],4:[function(t,e,r){var f,l,h=t("./lib/rng"),p=t("./lib/bytesToUuid"),y=0,d=0;e.exports=function(t,e,r){var n=e&&r||0,o=e||[],i=(t=t||{}).node||f,c=void 0!==t.clockseq?t.clockseq:l;null!=i&&null!=c||(a=h(),null==i&&(i=f=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==c&&(c=l=16383&(a[6]<<8|a[7])));var u=void 0!==t.msecs?t.msecs:(new Date).getTime(),r=void 0!==t.nsecs?t.nsecs:d+1,a=u-y+(r-d)/1e4;if(a<0&&void 0===t.clockseq&&(c=c+1&16383),1e4<=(r=(a<0||y<u)&&void 0===t.nsecs?0:r))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=u,l=c,r=(1e4*(268435455&(u+=122192928e5))+(d=r))%4294967296,o[n++]=r>>>24&255,o[n++]=r>>>16&255,o[n++]=r>>>8&255,o[n++]=255&r,u=u/4294967296*1e4&268435455,o[n++]=u>>>8&255,o[n++]=255&u,o[n++]=u>>>24&15|16,o[n++]=u>>>16&255,o[n++]=c>>>8|128,o[n++]=255&c;for(var s=0;s<6;++s)o[n+s]=i[s];return e||p(o)}},{"./lib/bytesToUuid":2,"./lib/rng":3}],5:[function(t,e,r){var c=t("./lib/rng"),u=t("./lib/bytesToUuid");e.exports=function(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||c)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[n+i]=o[i];return e||u(o)}},{"./lib/bytesToUuid":2,"./lib/rng":3}]},{},[1])(1)},"object"===n(e)?t.exports=r():void 0===(r="function"==typeof(r=r)?r.apply(e,[]):r)||(t.exports=r)}},n={};function at(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return r[t](e,e.exports,at),e.exports}at.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return at.d(e,{a:e}),e},at.d=(t,e)=>{for(var r in e)at.o(e,r)&&!at.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},at.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),at.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var st={};(()=>{"use strict";at.r(st),at.d(st,{AWSConfig:()=>r,InvalidAWSConfigError:()=>s,InvalidSignatureError:()=>A,S3Client:()=>V,S3ServiceError:()=>K,SecretsManagerClient:()=>it,URIEncodingConfig:()=>D,signHeaders:()=>x});const f=require("k6/crypto");var l=at.n(f);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t(r){var n=i();return function(){var t,e=u(r);return t=n?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function e(t){var r="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return n(t,arguments,u(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)}(t)}function n(t,e,r){return(n=i()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);n=new(Function.bind.apply(t,n));return r&&c(n,r.prototype),n}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function t(e,r,n){if(a(this,t),"string"!=typeof e||""===e)throw new s("invalid AWS region; reason: should be a non empty string");if("string"!=typeof r||""===r)throw new s("invalid AWS access key ID; reason: should be a non empty string");if("string"!=typeof n||""===n)throw new s("invalid AWS secret access key; reason: should be a non empty string");this.region=e,this.accessKeyID=r,this.secretAccessKey=n},s=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(o,e(Error));var n=t(o);function o(){a(this,o);for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.call.apply(n,[this].concat(e))}return o}();const h=require("k6/html");function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(r){var n=m();return function(){var t,e=w(r);return t=n?(t=w(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==p(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function b(t){var r="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return v(t,arguments,w(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),g(e,t)}(t)}function v(t,e,r){return(v=m()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);n=new(Function.bind.apply(t,n));return r&&g(n,r.prototype),n}).apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(o,b(Error));var t,e,r,n=d(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,t)).name="AWSError",t.code=e,t}return t=o,r=[{key:"parseXML",value:function(t){t=(0,h.parseHTML)(t);return new o(t.find("Message").text(),t.find("Code").text())}}],(e=null)&&y(t.prototype,e),r&&y(t,r),o}();function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],c=!0,u=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=T(r);return t=n?(t=T(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==O(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e,r,n,o,i,c,u,a){var s=function(t,e,r,n){e=U(e),e=(0,f.hmac)("sha256","AWS4"+t,e,"binary"),r=(0,f.hmac)("sha256",e,r,"binary"),n=(0,f.hmac)("sha256",r,n,"binary");return(0,f.hmac)("sha256",n,"aws4_request","binary")}(c.secretAccessKey,e,c.region,u),r=function(t,e,r,n,o,i){t=t.toUpperCase(),e=function(t,e){if("/"==t)return t;var r=t;"/"==t[t.length-1]&&"/"!=r[r.length-1]&&(r+="/");return r=M(r,e.path),e.double?M(r,e.path):r}(e,i),i=function(t){if(!t)return"";"string"==typeof t&&(t=function(t){if("string"!=typeof t||0===t.length)return{};for(var e={},r=t.split("&").filter(function(t){return t}),n=0;n<r.length;n++){var o=r[n].split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):e[decodeURIComponent(r[n])]=""}return e}(t));return Object.keys(t).sort().map(function(e){return(Array.isArray(t[e])?t[e]:[t[e]]).sort().map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&")}).join("&")}(r),r=function(t){return t.constructor===Object&&0!==Object.entries(t).length?Object.entries(t).map(function(t){var e=_(t,2),t=e[0],e=e[1];return t.toLowerCase().trim()+":"+(Array.isArray(e)?e:[e]).map(function(t){return t.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}).join(",")+"\n"}).sort().join(""):""}(n),n=q(n),o=function(t){return t!==k?l().sha256(t||"","hex").toLowerCase():t}(o);return[t,e,i,r,n,o].join("\n")}(r,n,o,t,i,a),a=(n=e,o=c.region,i=u,a=(0,f.sha256)(r,"hex"),r=I(n),i=N(n,o,i),[P,r,i,a].join("\n")),e=N(e,c.region,u),u=q(t),a=(s=s,a=a,(0,f.hmac)("sha256",s,a,"hex")),a="".concat(P," Credential=").concat(c.accessKeyID,"/").concat(e,", SignedHeaders=").concat(u,", Signature=").concat(a);return t.Authorization=a,t}var A=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(n,S);var r=E(n);function n(t,e){return R(this,n),(e=r.call(this,t,e)).name="InvalidSignatureError",e}return n}();var P="AWS4-HMAC-SHA256",k="UNSIGNED-PAYLOAD";function N(t,e,r){return[U(t),e,r,"aws4_request"].join("/")}function q(t){if(t.constructor!==Object)throw new TypeError("headers should be an object");if(0===Object.entries(t).length)throw"headers should at least contain either the Host (HTTP 1.1) or :authority (HTTP 2) parameter";return Object.keys(t).map(function(t){return t.toLowerCase().trim()}).sort().join(";")}function M(t,r){return""==t?t:t.split("").map(function(t){return"A"<=(e=t)&&e<="Z"||"a"<=e&&e<="z"||"0"<=(e=t)&&e<="9"||"-._~".includes(t)?t:" "==t?"%20":"/"==t&&r?"/":"%"+t.charCodeAt(0).toString(16).toUpperCase();var e}).join("")}var D=function t(e,r){R(this,t),this.double=e,this.path=r};function I(t){return new Date(t).toISOString().replace(/[:\-]|\.\d{3}/g,"")}function U(t){return I(t).substring(0,8)}var z=require("k6/http"),H=at.n(z);function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=W(r);return t=n?(t=W(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==L(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var V=function(){function e(t){X(this,e),this.awsConfig=t,this.serviceName="s3",this.URIencodingConfig=new D(!1,!0)}var t,r,n;return t=e,(r=[{key:"listBuckets",value:function(){var t="".concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),e=this._buildRequest("GET",t,"/","","",{}),t=e.url,e=e.headers,e=H().request("GET",t,"",{headers:e});this._handle_error(e.error_code,e.error,e.body);var n=[];return(0,h.parseHTML)(e.body).find("Buckets").children().each(function(t,e){var r=new Y;e.children().forEach(function(t){switch(t.nodeName()){case"name":Object.assign(r,{name:t.textContent()});case"creationdate":var e=Date.parse(t.textContent(),"YYYY-MM-ddTHH:mm:ss.sssZ");Object.assign(r,{creationDate:e})}}),n.push(r)}),n}},{key:"listObjects",value:function(t){var e="".concat(t,".").concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),t=this._buildRequest("GET",e,"/","list-type=2","",{}),e=t.url,t=t.headers,t=H().request("GET",e,"",{headers:t});this._handle_error(t.error_code,t.error,t.body);var n=[];return(0,h.parseHTML)(t.body).find("Contents").each(function(t,e){var r=new F;e.children().forEach(function(t){switch(t.nodeName()){case"key":Object.assign(r,{key:t.textContent()});case"lastmodified":var e=Date.parse(t.textContent(),"YYYY-MM-ddTHH:mm:ss.sssZ");Object.assign(r,{lastModified:e});case"etag":Object.assign(r,{etag:t.textContent()});case"size":Object.assign(r,{size:parseInt(t.textContent())});case"storageclass":Object.assign(r,{storageClass:t.textContent()})}}),n.push(r)}),n}},{key:"getObject",value:function(t,e){var r="".concat(t,".").concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),t="/".concat(e),r=this._buildRequest("GET",r,t,"","",{}),t=r.url,r=r.headers,r=H().request("GET",t,"",{headers:r});return this._handle_error(r.error_code,r.error,r.body),new F(e,r.headers["Last-Modified"],r.headers.ETag,r.headers["Content-Length"],"",r.body)}},{key:"putObject",value:function(t,e,r){t="".concat(t,".").concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),e="/".concat(e),t=this._buildRequest("PUT",t,e,"",r,{}),e=t.url,t=t.headers,t=H().request("PUT",e,r,{headers:t});this._handle_error(t.error_code,t.error,t.body)}},{key:"deleteObject",value:function(t,e){t="".concat(t,".").concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),e="/".concat(e),t=this._buildRequest("DELETE",t,e,"","",{}),e=t.url,t=t.headers,t=H().request("DELETE",e,"",{headers:t});this._handle_error(t.error_code,t.error,t.body)}},{key:"_buildRequest",value:function(t,e,r,n,o,i){var c=Date.now(),u=I(c);i.Host=e,i["X-Amz-Date"]=u,i["X-Amz-Content-SHA256"]=(0,f.sha256)(o,"hex"),i=x(i,c,t,r,n,o,this.awsConfig,this.serviceName,this.URIencodingConfig),r=""!==r?r:"/";r="https://".concat(e).concat(r);return""!==n&&(r+="?".concat(n)),{url:r,headers:i}}},{key:"_handle_error",value:function(t,e,r){if(""!=e&&0!==t){if(e&&e.startsWith("301"))throw console.log("HERE"),new K("Resource not found","ResourceNotFound","getObject");r=S.parseXML(r);if("AuthorizationHeaderMalformed"!==r.code)throw new K(r.message,r.code,"listObjects");throw new A(r.message,r.code)}}}])&&G(t.prototype,r),n&&G(t,n),e}(),Y=function t(e,r){X(this,t),this.name=e,this.creationDate=r},F=function t(e,r,n,o,i){var c=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;X(this,t),this.key=e,this.lastModified=r,this.etag=n,this.size=o,this.storageClass=i||"",this.data=c},K=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(o,S);var n=J(o);function o(t,e,r){return X(this,o),(e=n.call(this,t,e)).name="S3ServiceError",e.operation=r,e}return o}(),Z=at(41);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=et(r);return t=n?(t=et(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==$(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ot(t,e,r){return e&&nt(t.prototype,e),r&&nt(t,r),t}var it=function(){function e(t){rt(this,e),this.awsConfig=t,this.serviceName="secretsmanager",this.method="POST"}return ot(e,[{key:"listSecrets",value:function(){var t=JSON.stringify({}),e=this._buildRequest(this.method,this.host,"/","",t,{}),r=e.url,e=e.headers;e["X-Amz-Target"]="".concat(this.serviceName,".ListSecrets");e=H().request(this.method,r,t,{headers:e});return this._handle_error("ListSecrets",e),e.json("SecretList").map(function(t){return ct.fromJSON(t)})}},{key:"getSecret",value:function(t){var e=JSON.stringify({SecretId:t}),r=this._buildRequest(this.method,this.host,"/","",e,{}),t=r.url,r=r.headers;r["X-Amz-Target"]="".concat(this.serviceName,".GetSecretValue");r=H().request(this.method,t,e,{headers:r});return this._handle_error("GetSecretValue",r),console.log("result: ".concat(JSON.stringify(r.json(),null,"  "))),ct.fromJSON(r.json())}},{key:"createSecret",value:function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],n=n||(0,Z.v4)(),e=JSON.stringify({Name:t,Description:r,SecretString:e,ClientRequestToken:n,Tags:o}),n=this._buildRequest(this.method,this.host,"/","",e,{}),o=n.url,n=n.headers;n["X-Amz-Target"]="".concat(this.serviceName,".CreateSecret");n=H().request(this.method,o,e,{headers:n});return this._handle_error("CreateSecret",n),ct.fromJSON(n.json())}},{key:"putSecretValue",value:function(t,e){var r=(r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)||(0,Z.v4)(),t=JSON.stringify({SecretId:t,SecretString:e,ClientRequestToken:r}),e=this._buildRequest(this.method,this.host,"/","",t,{}),r=e.url,e=e.headers;e["X-Amz-Target"]="".concat(this.serviceName,".PutSecretValue");e=H().request(this.method,r,t,{headers:e});return this._handle_error("PutSecretValue",e),ct.fromJSON(e.json())}},{key:"deleteSecret",value:function(t,e){var r=e.recoveryWindow,r=void 0===r?30:r,e=e.noRecovery,t={SecretId:t};!0===(void 0!==e&&e)?t.ForceDeleteWithoutRecovery=!0:t.RecoveryWindowInDays=r;e=JSON.stringify(t),r=this._buildRequest(this.method,this.host,"/","",e,{}),t=r.url,r=r.headers;r["X-Amz-Target"]="".concat(this.serviceName,".DeleteSecret");r=H().request(this.method,t,e,{headers:r});this._handle_error("DeleteSecret",r)}},{key:"host",get:function(){return"".concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com")}},{key:"_buildRequest",value:function(t,e,r,n,o,i){var c=Date.now(),u=I(c);i.Host=e,i["X-Amz-Date"]=u,i["Accept-Encoding"]="identity",i["Content-Type"]="application/x-amz-json-1.1",i=x(i,c,t,r,n,o,this.awsConfig,this.serviceName,this.URIencodingConfig),r=""!==r?r:"/";r="https://".concat(e).concat(r);return""!==n&&(r+="?".concat(n)),{url:r,headers:i}}},{key:"_handle_error",value:function(t,e){var r=e.error_code;if(0!==r){var n=e.json();if(console.log(r,JSON.stringify(n,null,"  ")),1400<=r&&r<=1499){e=n.Message||n.message||n.__type;if("InvalidSignatureException"===n.__type)throw new A(e,n.__type);throw new ut(e,n.__type,t)}if(1500===r)throw new ut("An error occured on the server side","InternalServiceError",t)}}}]),e}(),ct=function(){function u(t,e,r,n,o,i){var c=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[];rt(this,u),this.name=t,this.arn=e,this.secretString=r,this.createdDate=n,this.lastAccessedDate=o,this.lastChangedDate=i,this.tags=c}return ot(u,null,[{key:"fromJSON",value:function(t){return new u(t.Name,t.ARN,t.SecretString,t.CreatedDate,t.LastAccessedDate,t.LastChangeddAt,t.Tags)}}]),u}(),ut=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(o,S);var n=tt(o);function o(t,e,r){return rt(this,o),(e=n.call(this,t,e)).name="SecretsManagerServiceError",e.operation=r,e}return o}()})();var t,e=exports;for(t in st)e[t]=st[t];st.__esModule&&Object.defineProperty(e,"__esModule",{value:!0})})();