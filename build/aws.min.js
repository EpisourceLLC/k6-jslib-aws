!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=3)}([function(t,e){t.exports=require("k6/crypto")},function(t,e){t.exports=require("k6/http")},function(t,e){t.exports=require("k6/html")},function(t,e,n){"use strict";n.r(e),n.d(e,"signHeaders",function(){return M}),n.d(e,"InvalidSignatureError",function(){return k}),n.d(e,"URIEncodingConfig",function(){return z}),n.d(e,"AWSConfig",function(){return y}),n.d(e,"InvalidAWSConfigError",function(){return h}),n.d(e,"S3Client",function(){return Z}),n.d(e,"S3ServiceError",function(){return Q});var f=n(0),l=n.n(f);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(n){var r=u();return function(){var t,e=s(n);return t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function i(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return r(t,arguments,s(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)}(t)}function r(t,e,n){return(r=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&a(r,n.prototype),r}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=function t(e,n,r){if(p(this,t),"string"!=typeof e||""===e)throw new h("invalid AWS region; reason: should be a non empty string");if("string"!=typeof n||""===n)throw new h("invalid AWS access key ID; reason: should be a non empty string");if("string"!=typeof r||""===r)throw new h("invalid AWS secret access key; reason: should be a non empty string");this.region=e,this.accessKeyID=n,this.secretAccessKey=r},h=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(o,i(Error));var r=c(o);function o(){p(this,o);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.call.apply(r,[this].concat(e))}return o}(),b=n(2);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(n){var r=O();return function(){var t,e=_(n);return t=r?(t=_(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==d(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function g(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return w(t,arguments,_(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),j(e,t)}(t)}function w(t,e,n){return(w=O()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&j(r,n.prototype),r}).apply(null,arguments)}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(o,g(Error));var t,e,n,r=v(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,t)).name="AWSError",t.code=e,t}return t=o,n=[{key:"parseXML",value:function(t){t=Object(b.parseHTML)(t);return new o(t.find("Message").text(),t.find("Code").text())}}],(e=null)&&m(t.prototype,e),n&&m(t,n),o}();function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,o,c=[],i=!0,u=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(c.push(r.value),!e||c.length!==e);i=!0);}catch(t){u=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=P(n);return t=r?(t=P(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==C(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e,n,r,o,c,i,u,a){var s=function(t,e,n,r){e=N(e),e=Object(f.hmac)("sha256","AWS4"+t,e,"binary"),n=Object(f.hmac)("sha256",e,n,"binary"),r=Object(f.hmac)("sha256",n,r,"binary");return Object(f.hmac)("sha256",r,"aws4_request","binary")}(i.secretAccessKey,e,i.region,u),n=function(t,e,n,r,o,c){t=t.toUpperCase(),e=function(t,e){if("/"==t)return t;var n=t;"/"==t[t.length-1]&&"/"!=n[n.length-1]&&(n+="/");return n=U(n,e.path),e.double?U(n,e.path):n}(e,c),c=function(t){if(!t)return"";"string"==typeof t&&(t=function(t){if("string"!=typeof t||0===t.length)return{};for(var e={},n=t.split("&").filter(function(t){return t}),r=0;r<n.length;r++){var o=n[r].split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):e[decodeURIComponent(n[r])]=""}return e}(t));return Object.keys(t).sort().map(function(e){return(Array.isArray(t[e])?t[e]:[t[e]]).sort().map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&")}).join("&")}(n),n=function(t){return t.constructor===Object&&0!==Object.entries(t).length?Object.entries(t).map(function(t){var e=E(t,2),t=e[0],e=e[1];return t.toLowerCase().trim()+":"+(Array.isArray(e)?e:[e]).map(function(t){return t.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}).join(",")+"\n"}).sort().join(""):""}(r),r=D(r),o=function(t){return t!==H?l.a.sha256(t||"","hex").toLowerCase():t}(o);return[t,e,c,n,r,o].join("\n")}(n,r,o,t,c,a),a=(r=e,o=i.region,c=u,a=Object(f.sha256)(n,"hex"),n=L(r),c=q(r,o,c),[I,n,c,a].join("\n")),e=q(e,i.region,u),u=D(t),a=(s=s,a=a,Object(f.hmac)("sha256",s,a,"hex")),a="".concat(I," Credential=").concat(i.accessKeyID,"/").concat(e,", SignedHeaders=").concat(u,", Signature=").concat(a);return t.Authorization=a,t}var k=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(r,S);var n=A(r);function r(t,e){return x(this,r),(e=n.call(this,t,e)).name="InvalidSignatureError",e}return r}();var I="AWS4-HMAC-SHA256",H="UNSIGNED-PAYLOAD";function q(t,e,n){return[N(t),e,n,"aws4_request"].join("/")}function D(t){if(t.constructor!==Object)throw new TypeError("headers should be an object");if(0===Object.entries(t).length)throw"headers should at least contain either the Host (HTTP 1.1) or :authority (HTTP 2) parameter";return Object.keys(t).map(function(t){return t.toLowerCase().trim()}).sort().join(";")}function U(t,n){return""==t?t:t.split("").map(function(t){return"A"<=(e=t)&&e<="Z"||"a"<=e&&e<="z"||"0"<=(e=t)&&e<="9"||"-._~".includes(t)?t:" "==t?"%20":"/"==t&&n?"/":"%"+t.charCodeAt(0).toString(16).toUpperCase();var e}).join("")}var z=function t(e,n){x(this,t),this.double=e,this.path=n};function L(t){return new Date(t).toISOString().replace(/[:\-]|\.\d{3}/g,"")}function N(t){return L(t).substring(0,8)}var e=n(1),B=n.n(e);function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=F(n);return t=r?(t=F(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==W(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function e(t){K(this,e),this.awsConfig=t,this.serviceName="s3",this.URIencodingConfig=new z(!1,!0)}var t,n,r;return t=e,(n=[{key:"listBuckets",value:function(){var t="".concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),e=this._buildRequest("GET",t,"/","","",{}),t=e.url,e=e.headers,e=B.a.request("GET",t,"",{headers:e});this._handle_error(e.error_code,e.error,e.body);var r=[];return Object(b.parseHTML)(e.body).find("Buckets").children().each(function(t,e){var n=new $;e.children().forEach(function(t){switch(t.nodeName()){case"name":Object.assign(n,{name:t.textContent()});case"creationdate":var e=Date.parse(t.textContent(),"YYYY-MM-ddTHH:mm:ss.sssZ");Object.assign(n,{creationDate:e})}}),r.push(n)}),r}},{key:"listObjects",value:function(t){var e="".concat(t,".").concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),t=this._buildRequest("GET",e,"/","list-type=2","",{}),e=t.url,t=t.headers,t=B.a.request("GET",e,"",{headers:t});this._handle_error(t.error_code,t.error,t.body);var r=[];return Object(b.parseHTML)(t.body).find("Contents").each(function(t,e){var n=new J;e.children().forEach(function(t){switch(t.nodeName()){case"key":Object.assign(n,{key:t.textContent()});case"lastmodified":var e=Date.parse(t.textContent(),"YYYY-MM-ddTHH:mm:ss.sssZ");Object.assign(n,{lastModified:e});case"etag":Object.assign(n,{etag:t.textContent()});case"size":Object.assign(n,{size:parseInt(t.textContent())});case"storageclass":Object.assign(n,{storageClass:t.textContent()})}}),r.push(n)}),r}},{key:"getObject",value:function(t,e){var n="".concat(t,".").concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),t="/".concat(e),n=this._buildRequest("GET",n,t,"","",{}),t=n.url,n=n.headers,n=B.a.request("GET",t,"",{headers:n});return this._handle_error(n.error_code,n.error,n.body),new J(e,n.headers["Last-Modified"],n.headers.ETag,n.headers["Content-Length"],"",n.body)}},{key:"putObject",value:function(t,e,n){t="".concat(t,".").concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),e="/".concat(e),t=this._buildRequest("PUT",t,e,"",n,{}),e=t.url,t=t.headers,t=B.a.request("PUT",e,n,{headers:t});this._handle_error(t.error_code,t.error,t.body)}},{key:"deleteObject",value:function(t,e){t="".concat(t,".").concat(this.serviceName,".").concat(this.awsConfig.region,".amazonaws.com"),e="/".concat(e),t=this._buildRequest("DELETE",t,e,"","",{}),e=t.url,t=t.headers,t=B.a.request("DELETE",e,"",{headers:t});this._handle_error(t.error_code,t.error,t.body)}},{key:"_buildRequest",value:function(t,e,n,r,o,c){var i=Date.now(),u=L(i);c.Host=e,c["X-Amz-Date"]=u,c["X-Amz-Content-SHA256"]=Object(f.sha256)(o,"hex"),c=M(c,i,t,n,r,o,this.awsConfig,this.serviceName,this.URIencodingConfig),n=""!==n?n:"/";n="https://".concat(e).concat(n);return""!==r&&(n+="?".concat(r)),{url:n,headers:c}}},{key:"_handle_error",value:function(t,e,n){if(""!=e&&0!==t){if(e&&e.startsWith("301"))throw console.log("HERE"),new Q("Resource not found","ResourceNotFound","getObject");n=S.parseXML(n);if("AuthorizationHeaderMalformed"!==n.code)throw new Q(n.message,n.code,"listObjects");throw new k(n.message,n.code)}}}])&&X(t.prototype,n),r&&X(t,r),e}(),$=function t(e,n){K(this,t),this.name=e,this.creationDate=n},J=function t(e,n,r,o,c){var i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;K(this,t),this.key=e,this.lastModified=n,this.etag=r,this.size=o,this.storageClass=c||"",this.data=i},Q=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(o,S);var r=G(o);function o(t,e,n){return K(this,o),(e=r.call(this,t,e)).name="S3ServiceError",e.operation=n,e}return o}()}]));